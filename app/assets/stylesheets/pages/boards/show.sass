@import globals/variables
@import mixins/button
@import mixins/close
@import mixins/link
@import mixins/popup
@import compass/css3

@import globals/variables

$image-path: "pages/p-boards-show"

.p-boards-show
  background: #f5f5f5
  .container
    padding: 0

  .actions
    margin-bottom: 10px

  .board
    position: relative

  .board-columns
    -moz-box-orient: horizontal
    -ms-flex-direction: row
    -webkit-box-orient: horizontal
    -webkit-flex-direction: row
    bottom: 0
    display: -moz-box
    display: -ms-flexbox
    display: -webkit-box
    display: -webkit-flex
    display: flex
    flex-direction: row
    left: 0
    overflow-x: auto
    overflow-y: hidden
    padding: 0px 20px 10px 10px
    position: absolute
    right: 0
    top: 0

  .board-column
    +border-radius(4px)
    -ms-flex: 0 0 260px
    -webkit-flex: 0 0 260px
    align-items: stretch
    flex: 0 0 260px
    height: calc(100% - 50px)
    margin-right: 0
    max-height: 100%
    padding: 40px 0 0 0
    position: relative
    vertical-align: top
    width: 260px

    &.last
      .issue
        &:hover
          a.button.close,
          a.button.archive
            display: block

          a.button.archive.hidden
            display: none

        .buttons
          .is_ready
            display: none

            &:hover
              display: none

    &:last-child
      margin-right: 0

      &:after
        content: ' '
        height: 1px
        margin-left: 260px
        position: relative
        width: 10px

  .column-menu
    .title
      color: $text-light
      font-size: 16px
      font-weight: bold
      padding: 10px 0 0 10px
      position: absolute
      top: 0

      span
        margin-left: 6px

    span.octicon.octicon-gear
      +border-radius(50px)
      color: $text-light
      cursor: pointer
      padding: 10px
      position: absolute
      right: 2px
      top: 2px

    .popup
      +popup
      font-size: 14px
      height: auto
      left: 100%
      top: 0
      width: 240px
      z-index: 3

      .delete
        +light_button

      ul
        list-style-type: none
        margin: 6px 0
        padding: 0 10px

        li
          padding: 6px 0
          margin: 0

          &.move
            a
              +light_button

              &:last-child
                margin-left: 10px

          &.delimiter
            border-bottom: 1px solid $form-border
            margin: 6px 0
            padding: 0

          label
            display: inline-block
            margin-right: 10px
            padding: 0
            white-space: nowrap
            width: 61px

          input
            width: 20px
            padding: 5px

            &.name
              width: 137px

  .badge
    display: inline-block

    &.warning
      color: #ff8930

    &.alert
      color: #ff5252

  .issues
    height: 100%
    overflow-y: auto
    padding: 0 10px

    .add-user
      display: none

  .new-issue
    +ajax_link
    +border-radius(6px)
    border: 1px solid #77B818
    color: #77B818
    display: inline-block
    float: right
    font-size: 14px
    margin: -32px 35px 0 0
    padding: 3px 5px
    vertical-align: top

    &:hover
      border-color: $orange

  .create-issue
    background: rgba(90,90,90,0.3)
    display: none
    height: 100%
    left: 0
    overflow: auto
    position: fixed
    top: 0
    width: 100%
    z-index: 1

    form.new_issue
      +border-radius(8px)
      +box-shadow(5px 10px 40px -3px rgba(90,80,80,0.3))
      background: #fff
      left: 50%
      margin-bottom: 100px
      margin-left: -335px
      outline: none
      overflow: hidden
      padding: 0
      position: absolute
      top: 170px
      width: 670px

      .issue_title
        margin: 15px 25px 0 20px

      textarea
        +border-radius(0)
        font-size: 24px
        min-height: 80px
        width: 100%

        background: none
        border: none
        border-bottom: 1px solid #ddd
        color: $text-usual
        margin-bottom: 2px
        outline: none
        resize: vertical

    label
      display: none

    .issue_body
      display: none

    .submit-area
      +border-radius(0)
      background: none
      border-top: 1px solid $form-border
      margin: 0 20px 10px
      padding: 15px 0 5px

      .cancel
        +ajax_link
        display: inline-block
        font-size: 13px

    .labels
      padding: 0 0 15px 20px
      text-align: left

      label
        +border-radius(6px)
        cursor: pointer
        display: inline-block
        margin: 10px 10px 0 0
        padding: 0px 5px 3px
        text-align: left
        width: 140px

        .label-name
          display: inline-block
          font-size: 14px
          overflow: hidden
          vertical-align: middle
          white-space: nowrap
          width: 110px

        .input
          display: inline-block
          vertical-align: middle

    .octicon.octicon-triangle-up
      display: block

    .close-popup
      +close

  .new-column
    text-align: center

    span
      +light_button
      display: inline-block
      padding: 5px 15px

  .create-column
    +border-radius(2px)
    background: #e9eae8
    display: none
    margin-top: -31px
    padding: 10px

    input[type='text']
      +border-radius(0)
      background: none
      border: none
      border-bottom: 1px solid $form-border
      display: block
      font-size: inherit
      line-height: 1.6
      outline: none
      width: 100%

    .submit-area
      background: none
      padding: 8px 0 0

      .cancel
        +ajax_link
        font-size: 13px

      input[type='submit']
        padding: 5px 10px

  .empty-issue
    +border-radius(4px)
    background: #ccc
    margin-bottom: 10px
    min-width: 40px

  .ui-sortable-helper
    +box-shadow(0 25px 20px -10px rgba(100, 100, 100, 0.3))

  .issue:not(form)
    +border-radius(2px)
    background-color: #fff
    border-bottom: 1px solid #ddd
    margin-bottom: 2px
    padding: 0 10px 5px
    position: relative

    &:hover
      cursor: -webkit-grab

      .buttons
        .is_ready
          cursor: pointer
          display: inline-block

    &.ui-draggable-dragging
      cursor: -webkit-grabbing
      position: absolute
      width: 220px
      z-index: 1

    &:hover
      background: #EAF4FC

    &.bug
      background: $card-bug

    &.closed
      opacity: 0.8
      background: $card-closed

      .issue-title,
      p
        color: #999

      a,
      .labels,
      .octicon
        +opacity(0.7)

    .url
      margin-left: 4px
      margin-right: 4px
      display: inline

    .buttons
      margin-top: 4px
      display: inline-block
      vertical-align: middle
      width: 50px

      a.button
        +button
        +border-radius(2px)
        display: none
        float: right
        font-size: 9px
        letter-spacing: 0.1em
        padding: 4px 10px 5px
        text-align: right
        text-transform: uppercase

      .is_ready
        +border-radius(0)
        background: image-url("#{$image-path}/ready.png") 0 0 no-repeat transparent
        background-size: 50px
        border: none
        color: #777
        display: none
        float: right
        font-size: 9px
        height: 20px
        letter-spacing: 0.1em
        line-height: 15px
        margin: -4px -5px 0 0
        opacity: 0.2
        padding: 2px 0 0 5px
        text-transform: uppercase
        width: 45px

        &:hover
          color: $button-hover
          background: image-url("#{$image-path}/ready-hover.png") 0 0 no-repeat transparent
          border: none
          background-size: 50px
          opacity: 1

        &.active
          background: image-url("#{$image-path}/ready-active.png") 0 0 no-repeat transparent
          background-size: 50px
          color: #fff
          display: inline-block
          margin-right: -20px
          opacity: 1

          &:hover
            background: image-url("#{$image-path}/ready-active-hover.png") 0 0 no-repeat transparent
            background-size: 50px

    .icons
      display: inline-block
      vertical-align: middle
      width: 170px
      min-height: 28px
      color: $text-light

      &>div, &>span
        vertical-align: middle
        display: inline-block

      .b-assignee
        display: inline-block
        margin: 5px 5px 5px 0
        width: 28px
        height: 28px

        &.hidden
          display: none
        .user
          margin: 0

      .octicon-book
        margin-right: 6px

      .checklist,
      .comments-count
        font-size: 11px
        margin-right: 6px

      .due-date
        color: $orange
        display: inline-block
        font-size: 12px
        font-weight: bold
        letter-spacing: -0.2px
        padding: 2px 3px

        &.none
          display: none

    .issue-title
      color: $text-usual
      font-size: 14px
      font-weight: normal
      line-height: 1.3em
      padding: 8px 0 0
      word-wrap: break-word

    .issue-name
      color: $text-usual
      cursor: pointer
      display: inline

  .issue-modal
    color: $text-usual
    display: none
    bottom: 0
    height: 100%
    left: 0
    overflow-y: auto
    position: fixed
    right: 0
    top: 0
    width: 100%

    &>.overlay
      +opacity(0.4)
      height: 100%
      left: 0
      position: fixed
      top: 0
      width: 100%
      z-index: 200

      &.visible
        +opacity(0.5)

    .modal-inner
      left: 50%
      margin-left: -480px
      margin-bottom: 40px
      position: absolute
      top: 100px
      width: $modal-width
      z-index: 205

    .modal-close
      +close

  .modal-preloader
    background-position: 50% 50%
    min-height: 200px
    width: 100%

    .modal-close
      +close

  .modal-preloader
    background-position: 50% 50%
    min-height: 200px
    width: 100%
